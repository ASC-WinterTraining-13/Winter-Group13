#ifndef __TRACK_SENSOR_H
#define __TRACK_SENSOR_H

#include "zf_common_typedef.h"
#include "zf_driver_gpio.h"


// 巡线状态 
extern uint8_t Track_Sensor_State ;

// 巡线状态宏定义
#define TRACK_STATE_OFF_LINE		0		//无线
#define TRACK_STATE_ON_LINE			1		//有线

//-------------------------------------------------------------------------------------------------------------------
// 函数简介     循迹传感器模块 初始化
// 使用示例     Track_Sensor_Init();
// 备注信息     只在"Menu.c"中的Peripheral_Init();函数调用一次;初始化4路循迹传感器GPIO为上拉输入模式
//-------------------------------------------------------------------------------------------------------------------

void Track_Sensor_Init(void);

//-------------------------------------------------------------------------------------------------------------------
// 函数简介     循迹传感器模块 获取所有传感器状态
// 参数说明     status_buf       输出参数，长度为4的数组，依次存储左2、左1、右1、右2传感器状态（黑=1，白=0）
// 使用示例     uint8_t sensor_data[4] = {0};
//              Track_Sensor_Get_All_Status(sensor_data);
// 备注信息     
//-------------------------------------------------------------------------------------------------------------------

void Track_Sensor_Get_All_Status(uint8 status_buf[]);

//-------------------------------------------------------------------------------------------------------------------
// 函数简介     循迹传感器模块 获取加权误差值（并更新有线/无线状态）
// 返回参数     float           循迹误差值（左偏为负，右偏为正）
// 使用示例     float error = Track_Sensor_Get_Error();
// 备注信息     内部包含三次采样滤波、权重计算、状态防抖判定逻辑
//-------------------------------------------------------------------------------------------------------------------

float Track_Sensor_Get_Error(void);

#endif